<script type="text/ng-template" id="checkboxSelectAll.html">
  <label>
    <input type="checkbox" ng-model="isAllSelected" ng-init="isAllSelected = false"
           ng-click="selectDocumentsOnCurrentPage(tableParams.data, tableParams.page())"/>
  </label>
</script>


<div class="box">
  <div class="box-header">
    <div class="pull-right box-tools">
      <button class="clear-btn pink" x-ng-click="isCollapsed = !isCollapsed" x-ng-class="{'active': isCollapsed}">
        <i class="fa fa-info-circle fa-lg"></i>
      </button>
    </div>
  </div>
  <div class="box-body">
    <div class="description" collapse="!isCollapsed">
      <x-ls-help content="getTemplate()"></x-ls-help>
    </div>
    <div class="row">
      <div class="pull-right">
        <button title="{{'MANAGE_USERS.BOX_FORM.FORM_ACTIONS.BUTTON_CHANGEDOMAIN_LABEL' | translate}}"
                class="btn btn-primary margin" type="button"
                ng-class="{disabled: selectedInconsistent.length === 0}"
                ng-click="changeDomain(selectedInconsistent)"
                data-ng-disabled="lsAppConfig.productionMode">
          {{"MANAGE_USERS.BOX_FORM.FORM_ACTIONS.BUTTON_CHANGEDOMAIN" | translate}}
        </button>
        <button title="{{'INCONSISTENT_USERS.BOX_FORM.FORM_ACTIONS.BUTTON_DELETE' | translate}}"
                class="btn btn-danger margin" type="button"
                ng-class="{disabled: selectedInconsistent.length === 0}"
                ng-click="deleteUsers(selectedInconsistent)">
          {{"INCONSISTENT_USERS.BOX_FORM.FORM_ACTIONS.BUTTON_DELETE" | translate}}
        </button>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-striped table-hover"
             x-ng-table="tableParams"
             show-filter="true">
        <tr x-ng-repeat="user in $data">
          <td data-title="'INCONSISTENT_USERS.BOX_LIST.TABLE.HEADER_FIRST_NAME' | translate"
              filter="{ 'firstName': 'text' }"
              sortable="'firstName'">
            <a x-ui-sref="inconsistentuser.list.detail({uuid: user.uuid})">
              <span>
                {{user.firstName}}
              </span>
            </a>
          </td>
          <td style="cursor: pointer"
              data-title="'INCONSISTENT_USERS.BOX_LIST.TABLE.HEADER_LAST_NAME' | translate"
              filter="{ 'lastName': 'text' }"
              sortable="'lastName'">
            <a x-ui-sref="inconsistentuser.list.detail({uuid: user.uuid})">
              <span>
                {{user.lastName}}
              </span>
            </a>
          </td>
          <td style="cursor: pointer"
              data-title="'INCONSISTENT_USERS.BOX_LIST.TABLE.HEADER_EMAIL' | translate"
              filter="{ 'mail': 'text' }"
              sortable="'mail'">
            <a x-ui-sref="inconsistentuser.list.detail({uuid: user.uuid})">
              <span>
                {{user.mail}}
              </span>
            </a>
          </td>
          <td style="cursor: pointer"
              data-title="'INCONSISTENT_USERS.BOX_LIST.TABLE.HEADER_DOMAIN' | translate"
              filter="{ 'domain': 'text' }"
              sortable="'domain'">
            <a x-ui-sref="inconsistentuser.list.detail({uuid: user.uuid})">
              <span>
                {{user.domain}}
              </span>
            </a>
          </td>

          <td style="cursor: pointer"
              data-title="'INCONSISTENT_USERS.BOX_LIST.TABLE.HEADER_ROLE' | translate"
              sortable="'role'">
            <a x-ui-sref="inconsistentuser.list.detail({uuid: user.uuid})">
              <span>
                {{user.role}}
              </span>
            </a>
          </td>
          <td data-header="'checkboxSelectAll.html'">
            <label>
              <input type="checkbox" ng-model="user.isSelected"
                     ng-change="toggleSelectInconsistent(user)"/>
            </label>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
