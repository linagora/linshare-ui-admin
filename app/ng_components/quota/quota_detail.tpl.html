<div class="box box-primary">
  <div class="box-header card-form-ctn">
    <div class="breadcrumb-quota-ctn">
      <h3 class="box-title breadcrumb-quota">
        <!--TODO: add standard breadcrumb behavior : add chevron icon if need be and set them to update
         the current domain if it was clicked -->
        <i class="fa fa-angle-right"></i>
        <a>{{quotaVm.domainDto.label}}</a>
      </h3>
    </div>
    <div class="form-top-actions">
      <div class="form-group m-0">
        <div class="controls">
          <button type="button" id="reset-top" name="reset-top" class="btn btn-warning" data-ng-click="quotaVm.reset()">
            {{'MANAGE_QUOTA.BOX_FORM.FORM_ACTIONS.BUTTON_RESET' | translate}}
          </button>
          <button type="submit" id="submit-top" name="submit" class="btn btn-success" data-ng-click="quotaVm.update()">
            {{'MANAGE_QUOTA.BOX_FORM.FORM_ACTIONS.BUTTON_SUBMIT' | translate}}
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="box-body">
    <div class="panel panel-default">
      <div class="panel-body">
        <span class="header-description">{{'MANAGE_QUOTA.INFO_QUOTA' | translate}}.</span>
        <button class="clear-btn pink pull-right" data-ng-class="{'active': infoCollapsed}"
                data-ng-click="infoCollapsed = !infoCollapsed">
          <i class="fa fa-info-circle fa-lg"></i>
        </button>
        <div class="description" collapse="infoCollapsed" data-ng-init="infoCollapsed = true">
          <x-ls-help content="quotaVm.getTemplate()"></x-ls-help>
        </div>
      </div>
    </div>
    <form name="quotaForm" class="form" role="form" x-ls-form-submit="quotaVm.update(quotaForm)" x-ls-form-attempt>
      <accordion class="sidebar-menu manage-quota-accordion" close-others>
        <accordion-group x-is-open="usedSpace.isopen" data-ng-init="usedSpace.isopen = true">
          <accordion-heading>
            <span>
              {{'MANAGE_QUOTA.BOX_FORM.USED_SPACE.MAIN_SECTION_TITLE' | translate}} {{quotaVm.domainDto.label}}
            </span>
            <i
              class="fa fa-exclamation-circle quota-status has-error-quota"
              data-ng-class="{
              'has-error-quota':quotaForm.domainQuota.$error.unitMax || quotaVm.graph.domain.alert,
              'has-warning-quota':quotaVm.domainQuotaDto.isInWarning && !quotaForm.domainQuota.$error.unitMax,
              }"
              data-ng-show="quotaForm.domainQuota.$error.unitMax ||
              quotaVm.graph.domain.alert ||
              quotaVm.domainQuotaDto.isInWarning"
            >
            </i>
            <i class="fa pull-right"
               data-ng-class="{'fa-angle-down': usedSpace.isopen, 'fa-angle-left': !usedSpace.isopen}">
            </i>
          </accordion-heading>
          <div class="col-xs-12 no-padding clearfix">
            <div class="accordion-header-form clearfix-after col-xs-12 no-padding border-grey">
              <h3 class="pull-left uppercase">
                {{'MANAGE_QUOTA.BOX_FORM.USED_SPACE.SUB_SECTION_DOMAIN_QUOTA' | translate}}
              </h3>
              <div class="pull-right maintenance-switch-ctn">
                <span class="maintenance-label">{{'MANAGE_QUOTA.BOX_FORM.MAINTENANCE_MODE' | translate}}</span>
                <label class="switch">
                  <input type="checkbox"
                         data-ng-model="quotaVm.domainQuotaDto.maintenance"
                         data-ng-change="quotaVm.userQuotaDto.maintenance = quotaVm.domainQuotaDto.maintenance;
                                      quotaVm.workgroupQuotaDto.maintenance = quotaVm.domainQuotaDto.maintenance">
                  <div class="slider round"></div>
                </label>
              </div>
            </div>
            <div class="clear">&nbsp</div>
            <!-- Graph 1 -->
            <section id="current-domain-quota-graph"
                     data-ls-graph="quotaVm.graph.domain" data-ng-if="quotaVm.isGraphReady">
            </section>

            <div class="alert-panel" role="alert" data-ng-class="{'show-fade-id' : quotaVm.domainQuotaDto.maintenance}">
              <span class="fa fa-exclamation-circle"></span>
              {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ALERT_MAINTENANCE_MODE' | translate}}
              {{'MANAGE_QUOTA.BOX_FORM.SPACES_LABEL.CURRENT_DOMAIN' | translate}}.
            </div>
            <div class="error-panel" role="alert" data-ng-show="quotaVm.graph.domain.alert">
              <span class="fa fa-exclamation-circle"></span>
              <span class="sr-only">{{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR' | translate}} :</span>
              {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_QUOTA' | translate}}
              {{'MANAGE_QUOTA.BOX_FORM.SPACES_LABEL.CURRENT_DOMAIN' | translate}}.
            </div>
            <div class="error-panel" role="alert" data-ng-show="quotaVm.domainQuotaDto.isExceeded()">
              <span class="fa fa-exclamation-circle"></span>
              <span class="sr-only">{{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR' | translate}} :</span>
              {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_QUOTA_EXCEEDED' | translate}}
              {{'MANAGE_QUOTA.BOX_FORM.SPACES_LABEL.CURRENT_DOMAIN' | translate}}.
            </div>
            <div class="accordion-form-content form-inline clear">
              <section class="col-xs-6-5 no-padding">
                <div
                  class="form-group col-xs-12 no-padding quota-status"
                  data-ng-class="{
                  'has-error-quota': quotaForm.domainQuota.$error.unitMax,
                  'has-warning-quota': quotaVm.domainQuotaDto.isInWarning && !quotaForm.domainQuota.$error.unitMax
                  }"
                >
                  <label
                    class="pull-left"
                    for="domainQuota"
                  >
                    <i 
                      class="fa fa-info-circle fa-lg"
                      tooltip-placement="bottom"
                      tooltip-popup-delay='1250'
                      tooltip-append-to-body="true"
                      tooltip="{{'MANAGE_QUOTA.BOX_FORM.DOMAIN_SHARED_QUOTA.DESCRIPTION' | translate}}"
                    >
                    </i>
                    {{'MANAGE_QUOTA.BOX_FORM.DOMAIN_SHARED_QUOTA.LABEL' | translate}} :
                  </label>
                  <span class="pull-right">
                    <label
                      class="switch"
                      data-ng-class="{'btn-disabled': !quotaVm.domainQuotaDto.domainSharedOverride
                      && !quotaVm.isRootDomain(quotaVm.domainQuotaDto)}"
                    >
                      <input
                        type="checkbox"
                        data-ng-model="quotaVm.domainQuotaDto.domainShared"
                        data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.domainQuotaDto.domainSharedOverride)"
                        data-ng-change="quotaVm.formRender(quotaForm)"
                      >
                      <div class="slider round"></div>
                    </label>
                    <a 
                      class="link-ctn pull-right"
                      data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                      data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.domainQuotaDto,
                        quotaVm.parentDomainQuotaDto, 'domainShared')"
                    >
                      <i
                        class="fa link-icon show-link"
                        data-ng-class="{'fa-link' : !quotaVm.domainQuotaDto.domainSharedOverride,
                          'fa-chain-broken' : quotaVm.domainQuotaDto.domainSharedOverride}"
                      >
                      </i>
                    </a>
                  </span>
                </div>
              </section>
            </div>
            <div class="accordion-form-content form-inline clear">
              <section class="col-xs-6-5 no-padding">
                <div class="form-group col-xs-12 no-padding"
                     data-ng-class="{'has-error-quota': quotaForm.domainQuota.$error.unitMax}">
                  <label for="domainQuota" class="pull-left">
                  {{'MANAGE_QUOTA.BOX_FORM.USED_SPACE.LABEL_QUOTA' | translate}} :
                   <span>
                     <em tooltip-placement="bottom"
                         tooltip-popup-delay='1250'
                         tooltip-append-to-body="true"
                         tooltip="{{quotaVm.domainQuotaDto.usedSpace |
                                      readableSize:quotaVm.unit.domains.usedSpace:true}}">
                       {{quotaVm.domainQuotaDto.usedSpace| readableSize:quotaVm.unit.domains.quota:false}}
                     </em>/
                     {{quotaVm.domainQuotaDto.quota| readableSize:quotaVm.unit.domains.quota:true}}
                     {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_ALLREADY_USED' | translate}}
                     ({{quotaVm.getPercentage(quotaVm.domainQuotaDto.usedSpace, quotaVm.domainQuotaDto.quota)}}%)
                  </span>
                </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="domainQuota"
                           name="domainQuota"
                           data-ng-model="quotaVm.domainQuotaDto.getQuota"
                           data-ng-change="quotaVm.domainQuotaDto.setQuota(
                                          quotaForm.domainQuota.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.domainQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.domainQuotaDto.quotaOverride)"
                           data-ng-if="quotaVm.isRootDomain(quotaVm.domainQuotaDto)">
                    <input type="text" class="form-control" id="domainQuota"
                           name="domainQuota"
                           data-ng-model="quotaVm.domainQuotaDto.getQuota"
                           data-ng-change="quotaVm.domainQuotaDto.setQuota(
                                          quotaForm.domainQuota.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.domainQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.domainQuotaDto.quotaOverride)"
                           x-unit="quotaVm.unit.parentdomains.quota"
                           x-unit-max="quotaVm.parentDomainQuotaDto.quota"
                           data-ng-if="!quotaVm.isRootDomain(quotaVm.domainQuotaDto)">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.domains.quota"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.domains.quota = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a class="link-ctn"
                       tooltip-placement="bottom"
                       tooltip-popup-delay='1250'
                       tooltip-append-to-body="true"
                       tooltip="{{quotaVm.domainQuotaDto.quotaOverride ?
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                              translate:'{value:quotaVm.parentDomainQuotaDto.getDefaultQuota(true)}'}}"
                       data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                       data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.domainQuotaDto, quotaVm.parentDomainQuotaDto, 'quota')">

                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.domainQuotaDto.quotaOverride,
                                'fa-chain-broken' : quotaVm.domainQuotaDto.quotaOverride}">
                      </i>
                    </a>
                  </span>
                  <div
                    class="pull-right help-block"
                    data-ng-show="quotaVm.domainQuotaDto.isInWarning && !quotaForm.domainQuota.$error.unitMax"
                    data-ng-if="!quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                  >
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.WARNING_MAX_VALUE' | translate}}
                    {{quotaVm.parentDomainQuotaDto.defaultQuota | readableSize:quotaVm.unit.parentdomains.defaultQuota:true}}
                  </div>
                  <div class="pull-right help-block" data-ng-show="quotaForm.domainQuota.$error.unitMax"
                       data-ng-if="!quotaVm.isRootDomain(quotaVm.domainQuotaDto)">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    {{quotaVm.parentDomainQuotaDto.quota | readableSize:quotaVm.unit.parentdomains.quota:true}}
                  </div>
                </div>
              </section>
            </div>
          </div>
        </accordion-group>
        <accordion-group x-is-open="ctnAllocation.isopen" data-ng-init="ctnAllocation.isopen = false">
          <accordion-heading>
            <span>
              {{'MANAGE_QUOTA.BOX_FORM.CONTAINER_ALLOCATION.MAIN_SECTION_TITLE' | translate}}
              {{quotaVm.domainDto.label}}
            </span>
            <i class="fa fa-exclamation-circle quota-status has-error-quota"
               data-ng-show="quotaForm.domainUserQuota.$error.unitMax ||
                      quotaForm.domainUserQuotaPerUser.$error.unitMax ||
                      quotaForm.domainUserMaxFileSize.$error.unitMax ||
                      quotaForm.domainWorkgroupQuota.$error.unitMax ||
                      quotaForm.domainWorkgroupMaxFileSize.$error.unitMax ||
                      quotaVm.graph.personalSpace.alert || quotaVm.graph.sharedSpace.alert">
            </i>
            <i class="fa pull-right"
               data-ng-class="{'fa-angle-down': ctnAllocation.isopen, 'fa-angle-left': !ctnAllocation.isopen}">
            </i>
          </accordion-heading>
          <div class="col-xs-12 no-padding clearfix">
            <div class="accordion-header-form clearfix-after col-xs-12 no-padding border-grey">
              <h3 class="pull-left uppercase">
                {{'MANAGE_QUOTA.BOX_FORM.CONTAINER_ALLOCATION.SUB_SECTION_PERSONAL_SPACES_QUOTA' | translate}}
              </h3>
              <div class="pull-right maintenance-switch-ctn">
                <span class="maintenance-label">{{'MANAGE_QUOTA.BOX_FORM.MAINTENANCE_MODE' | translate}}</span>
                <label class="switch">
                  <input type="checkbox" data-ng-model="quotaVm.userQuotaDto.maintenance">
                  <div class="slider round"></div>
                </label>
              </div>
            </div>
            <div class="clear">&nbsp</div>
            <!-- Graph 2-->
            <section id="personal-space-quota-graph"
                     data-ls-graph="quotaVm.graph.personalSpace" data-ng-if="quotaVm.isGraphReady">
            </section>

            <div class="alert-panel" role="alert" data-ng-class="{'show-fade-id' : quotaVm.userQuotaDto.maintenance}">
              <span class="fa fa-exclamation-circle"></span>
              {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ALERT_MAINTENANCE_MODE' | translate}}
              {{'MANAGE_QUOTA.BOX_FORM.SPACES_LABEL.PERSONALS_SPACES' | translate}}.
            </div>
            <div class="error-panel" role="alert" data-ng-show="quotaVm.graph.personalSpace.alert">
              <span class="fa fa-exclamation-circle"></span>
              <span class="sr-only">{{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR' | translate}} :</span>
              {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_QUOTA' | translate}}
              {{'MANAGE_QUOTA.BOX_FORM.SPACES_LABEL.PERSONALS_SPACES' | translate}}.
            </div>
            <div class="error-panel" role="alert" data-ng-show="quotaVm.userQuotaDto.isExceeded()">
              <span class="fa fa-exclamation-circle"></span>
              <span class="sr-only">{{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR' | translate}} :</span>
              {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_QUOTA_EXCEEDED' | translate}}
              {{'MANAGE_QUOTA.BOX_FORM.SPACES_LABEL.PERSONALS_SPACES' | translate}}.
            </div>
            <div class="accordion-form-content form-inline clear">
              <section class="col-xs-6-5 no-padding">
                <div class="form-group col-xs-12 no-padding quota-status"
                     data-ng-class="{'has-error-quota': quotaForm.domainUserQuota.$error.unitMax}">
                  <label for="domainUserQuota" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.CONTAINER_ALLOCATION.LABEL_PERSONAL_SPACE_QUOTA' | translate}} :
                    <span>
                     <em class=""
                         tooltip-placement="bottom"
                         tooltip-popup-delay='1250'
                         tooltip-append-to-body="true"
                         tooltip="{{quotaVm.userQuotaDto.usedSpace| readableSize:quotaVm.unit.user.usedSpace:true}}">
                       {{quotaVm.userQuotaDto.usedSpace| readableSize:quotaVm.unit.user.quota:false}}
                     </em>/
                     {{quotaVm.userQuotaDto.quota| readableSize:quotaVm.unit.user.quota:true}}
                     {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_ALLREADY_USED' | translate}}
                     ({{quotaVm.getPercentage(quotaVm.userQuotaDto.usedSpace, quotaVm.userQuotaDto.quota)}}%)
                    </span>
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="domainUserQuota" name="domainUserQuota"
                            data-ng-model="quotaVm.userQuotaDto.getQuota"
                            data-ng-change="quotaVm.userQuotaDto.setQuota(
                                           quotaForm.domainUserQuota.$viewValue, quotaForm)"
                            data-ng-blur="quotaVm.userQuotaDto.updateGraph(quotaForm)"
                            data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.userQuotaDto.quotaOverride,
                              quotaVm.domainQuotaDto.domainShared)"
                            x-unit="quotaVm.unit.user.quota"
                            data-ng-attr-data-unit-max="!quotaVm.domainQuotaDto.domainShared ?
                              quotaVm.domainQuotaDto.quota : undefined">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.user.quota"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.user.quota = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a
                      class="link-ctn"
                      data-ng-class="{'btn-disabled': quotaVm.domainQuotaDto.domainShared}"
                      tooltip-placement="bottom"
                      tooltip-popup-delay='1250'
                      tooltip-append-to-body="true"
                      tooltip="{{quotaVm.userQuotaDto.quotaOverride ?
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                        translate:'{value:quotaVm.parentContainersQuotaDto.user.getDefaultQuota(true)}'}}"
                      data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.userQuotaDto,
                        quotaVm.parentContainersQuotaDto.user, 'quota')"
                      data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                    >
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.userQuotaDto.quotaOverride,
                                'fa-chain-broken' : quotaVm.userQuotaDto.quotaOverride}">
                      </i>
                    </a>
                  </span>
                  <div class="pull-right help-block" data-ng-show="quotaForm.domainUserQuota.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    {{quotaVm.domainQuotaDto.quota | readableSize:quotaVm.unit.domains.quota:true}}
                  </div>
                </div>
                <div class="form-group col-xs-12 no-padding quota-status"
                     data-ng-class="{'has-error-quota': quotaForm.domainUserQuotaPerUser.$error.unitMax}">
                  <label for="domainUserQuotaPerUser" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.CONTAINER_ALLOCATION.LABEL_USERS_PERSONAL_SPACE_QUOTA' | translate}} :
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="domainUserQuotaPerUser"
                           name="domainUserQuotaPerUser"
                           data-ng-model="quotaVm.userQuotaDto.getAccountQuota"
                           data-ng-change="quotaVm.userQuotaDto.setAccountQuota(
                                          quotaForm.domainUserQuotaPerUser.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.userQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.userQuotaDto.accountQuotaOverride,
                            quotaVm.domainQuotaDto.domainShared)"
                           x-unit="quotaVm.unit.user.accountQuota"
                           data-ng-attr-data-unit-max="!quotaVm.domainQuotaDto.domainShared ?
                            quotaVm.userQuotaDto.quota : undefined">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.user.accountQuota"
                        x-list="quotaVm.unit.value"
                        x-action="quotaVm.unit.user.accountQuota = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a
                      class="link-ctn"
                      data-ng-class="{'btn-disabled': quotaVm.domainQuotaDto.domainShared}"
                      tooltip-placement="bottom"
                      tooltip-popup-delay='1250'
                      tooltip-append-to-body="true"
                      tooltip="{{quotaVm.userQuotaDto.accountQuotaOverride ?
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                        translate:'{value:quotaVm.parentContainersQuotaDto.user.getDefaultAccountQuota(true)}'}}"
                      data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.userQuotaDto,
                        quotaVm.parentContainersQuotaDto.user, 'accountQuota')"
                      data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                    >
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.userQuotaDto.accountQuotaOverride,
                                'fa-chain-broken' : quotaVm.userQuotaDto.accountQuotaOverride}">
                      </i>
                    </a>
                  </span>
                  <div class="pull-right help-block" data-ng-show="quotaForm.domainUserQuotaPerUser.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    {{quotaVm.userQuotaDto.quota | readableSize:quotaVm.unit.user.quota:true}}
                  </div>
                </div>
                <div class="form-group col-xs-12 no-padding quota-status"
                     data-ng-class="{'has-error-quota': quotaForm.domainUserMaxFileSize.$error.unitMax}">
                  <label for="domainUserMaxFileSize" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.CONTAINER_ALLOCATION.LABEL_PERSONAL_SPACE_MAX_FILE_SIZE' | translate}} :
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="domainUserMaxFileSize" name="domainUserMaxFileSize"
                           data-ng-model="quotaVm.userQuotaDto.getMaxFileSize"
                           data-ng-change="quotaVm.userQuotaDto.setMaxFileSize(
                                          quotaForm.domainUserMaxFileSize.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.userQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.userQuotaDto.maxFileSizeOverride)"
                           x-unit="quotaVm.unit.user.maxFileSize"
                           data-ng-attr-data-unit-max="!quotaVm.domainQuotaDto.domainShared ?
                            quotaVm.userQuotaDto.accountQuota : quotaVm.domainQuotaDto.quota">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.user.maxFileSize"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.user.maxFileSize = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a class="link-ctn"
                       tooltip-placement="bottom"
                       tooltip-popup-delay='1500'
                       tooltip-append-to-body="true"
                       tooltip="{{quotaVm.userQuotaDto.maxFileSizeOverride ?
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                              translate:'{value:quotaVm.parentContainersQuotaDto.user.getDefaultMaxFileSize(true)}'}}"
                       data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.userQuotaDto, quotaVm.parentContainersQuotaDto.user, 'maxFileSize')"
                       data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)">
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.userQuotaDto.maxFileSizeOverride,
                                'fa-chain-broken' : quotaVm.userQuotaDto.maxFileSizeOverride}">
                      </i>
                    </a>
                  </span>
                  <div class="pull-right help-block" data-ng-show="quotaForm.domainUserMaxFileSize.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    <span data-ng-if="!quotaVm.domainQuotaDto.domainShared">
                      {{quotaVm.userQuotaDto.accountQuota | readableSize:quotaVm.unit.user.accountQuota:true}}
                    </span>
                    <span data-ng-if="quotaVm.domainQuotaDto.domainShared">
                      {{quotaVm.domainQuotaDto.quota | readableSize:quotaVm.unit.domains.quota:true}}
                    </span>
                  </div>
                </div>
                <div class="form-group col-xs-12 no-padding">
                  <a ui-sref="user.list">
                    <i class="fa fa-angle-right"></i>
                    {{'MANAGE_QUOTA.BOX_FORM.CONTAINER_ALLOCATION.LABEL_USER_PERSONAL_SPACE_QUOTA_LINK' | translate}}
                  </a>
                </div>
              </section>
            </div>
            <div class="accordion-header-form clearfix-after col-xs-12 no-padding border-grey">
              <h3 class="pull-left uppercase">
                {{'MANAGE_QUOTA.BOX_FORM.CONTAINER_ALLOCATION.SUB_SECTION_WORKGROUP_QUOTA' | translate}}
              </h3>
              <div class="pull-right maintenance-switch-ctn">
                <span class="maintenance-label">{{'MANAGE_QUOTA.BOX_FORM.MAINTENANCE_MODE' | translate}}</span>
                <label class="switch">
                  <input type="checkbox" data-ng-model="quotaVm.workgroupQuotaDto.maintenance">
                  <div class="slider round"></div>
                </label>
              </div>
            </div>
            <div class="clear">&nbsp</div>
            <!-- Graph 3 -->
            <section id="sharedspace-quota-graph"
                     data-ls-graph="quotaVm.graph.sharedSpace" data-ng-if="quotaVm.isGraphReady">
            </section>

            <div class="alert-panel" role="alert"
                 data-ng-class="{'show-fade-id' : quotaVm.workgroupQuotaDto.maintenance}">
              <span class="fa fa-exclamation-circle"></span>
              {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ALERT_MAINTENANCE_MODE' | translate}}
              {{'MANAGE_QUOTA.BOX_FORM.SPACES_LABEL.WORKGROUP' | translate}}.
            </div>
            <div class="error-panel" role="alert" data-ng-show="quotaVm.graph.sharedSpace.alert">
              <span class="fa fa-exclamation-circle"></span>
              <span class="sr-only">{{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR' | translate}} :</span>
              {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_QUOTA' | translate}}
              {{'MANAGE_QUOTA.BOX_FORM.SPACES_LABEL.WORKGROUP' | translate}}.
            </div>
            <div class="error-panel" role="alert" data-ng-show="quotaVm.workgroup.isExceeded()">
              <span class="fa fa-exclamation-circle"></span>
              <span class="sr-only">{{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR' | translate}} :</span>
              {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_QUOTA_EXCEEDED' | translate}}
              {{'MANAGE_QUOTA.BOX_FORM.SPACES_LABEL.WORKGROUP' | translate}}.
            </div>
            <div class="accordion-form-content form-inline clear">
              <section class="col-xs-6-5 no-padding">
                <div class="form-group col-xs-12 no-padding quota-status"
                     data-ng-class="{'has-error-quota': quotaForm.domainWorkgroupQuota.$error.unitMax}">
                  <label for="domainWorkgroupQuota" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.CONTAINER_ALLOCATION.LABEL_WORKGROUP_QUOTA' | translate}} :
                    <span>
                      <em class=""
                          tooltip-placement="bottom"
                          tooltip-popup-delay='1250'
                          tooltip-append-to-body="true"
                          tooltip="{{quotaVm.workgroupQuotaDto.usedSpace|
                                     readableSize:quotaVm.unit.workgroup.usedSpace:true}}">
                       {{quotaVm.workgroupQuotaDto.usedSpace| readableSize:quotaVm.unit.workgroup.quota:false}}
                       </em>/
                      {{quotaVm.workgroupQuotaDto.quota| readableSize:quotaVm.unit.workgroup.quota:true}}
                      {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_ALLREADY_USED' | translate}}
                      ({{quotaVm.getPercentage(quotaVm.workgroupQuotaDto.usedSpace, quotaVm.workgroupQuotaDto.quota)}}%)
                    </span>
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="domainWorkgroupQuota" name="domainWorkgroupQuota"
                           data-ng-model="quotaVm.workgroupQuotaDto.getQuota"
                           data-ng-change="quotaVm.workgroupQuotaDto.setQuota(
                                          quotaForm.domainWorkgroupQuota.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.workgroupQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.workgroupQuotaDto.quotaOverride,
                            quotaVm.domainQuotaDto.domainShared)"
                           x-unit="quotaVm.unit.workgroup.quota"
                           data-ng-attr-data-unit-max="!quotaVm.domainQuotaDto.domainShared ?
                              quotaVm.domainQuotaDto.quota : undefined">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.workgroup.quota"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.workgroup.quota = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a
                      class="link-ctn"
                      data-ng-class="{'btn-disabled': quotaVm.domainQuotaDto.domainShared}"
                      tooltip-placement="bottom"
                      tooltip-popup-delay='1250'
                      tooltip-append-to-body="true"
                      tooltip="{{quotaVm.workgroupQuotaDto.quotaOverride ?
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                        translate:'{value:quotaVm.parentContainersQuotaDto.workgroup.getDefaultQuota(true)}'}}"
                      data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.workgroupQuotaDto,
                        quotaVm.parentContainersQuotaDto.workgroup, 'quota')"
                      data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                    >
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.workgroupQuotaDto.quotaOverride,
                                'fa-chain-broken' : quotaVm.workgroupQuotaDto.quotaOverride}">
                      </i>
                    </a>
                  </span>
                  <div class="pull-right help-block" data-ng-show="quotaForm.domainWorkgroupQuota.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    {{quotaVm.domainQuotaDto.quota | readableSize:quotaVm.unit.domains.quota:true}}
                  </div>
                </div>
                <div class="form-group col-xs-12 no-padding quota-status"
                     data-ng-class="{'has-error-quota': quotaForm.domainWorkgroupMaxFileSize.$error.unitMax}">
                  <label for="domainWorkgroupMaxFileSize" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.CONTAINER_ALLOCATION.LABEL_WORKGROUP_MAX_FILE_SIZE' | translate}} :
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="domainWorkgroupMaxFileSize"
                           name="domainWorkgroupMaxFileSize"
                           data-ng-model="quotaVm.workgroupQuotaDto.getMaxFileSize"
                           data-ng-change="quotaVm.workgroupQuotaDto.setMaxFileSize(
                                          quotaForm.domainWorkgroupMaxFileSize.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.workgroupQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.workgroupQuotaDto.maxFileSizeOverride)"
                           x-unit="quotaVm.unit.workgroup.maxFileSize"
                           data-ng-attr-data-unit-max="!quotaVm.domainQuotaDto.domainShared ?
                              quotaVm.workgroupQuotaDto.quota : quotaVm.domainQuotaDto.quota">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.workgroup.maxFileSize"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.workgroup.maxFileSize = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a class="link-ctn"
                       tooltip-placement="bottom"
                       tooltip-popup-delay='1250'
                       tooltip-append-to-body="true"
                       tooltip="{{quotaVm.workgroupQuotaDto.maxFileSizeOverride ?
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                              translate:'{value:quotaVm.parentContainersQuotaDto.workgroup.getDefaultMaxFileSize(true)}'}}"
                       data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.workgroupQuotaDto, quotaVm.parentContainersQuotaDto.workgroup, 'maxFileSize')"
                       data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)">
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.workgroupQuotaDto.maxFileSizeOverride,
                                'fa-chain-broken' : quotaVm.workgroupQuotaDto.maxFileSizeOverride}">
                      </i>
                    </a>
                  </span>
                  <div class="pull-right help-block" data-ng-show="quotaForm.domainWorkgroupMaxFileSize.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    <span data-ng-if="!quotaVm.domainQuotaDto.domainShared">
                      {{quotaVm.workgroupQuotaDto.quota | readableSize:quotaVm.unit.workgroup.quota:true}}
                    </span>
                    <span data-ng-if="quotaVm.domainQuotaDto.domainShared">
                      {{quotaVm.domainQuotaDto.quota | readableSize:quotaVm.unit.domains.quota:true}}
                    </span>
                  </div>
                </div>
              </section>
            </div>
            <div class="col-xs-12 no-padding clearfix">
              <div class="accordion-header-form clearfix-after col-xs-12 no-padding border-grey">
                <h3 class="pull-left uppercase" translate>
                  MANAGE_QUOTA.BOX_FORM.GRAPH.TITLE.VIRTUAL
                </h3>
              </div>
              <div class="clear">&nbsp</div>

              <!-- Graph 4 -->
            <section id="containers-allocation-quota-graph"
                     data-ls-graph="quotaVm.graph.domainContainers" data-ng-if="quotaVm.isGraphReady">
            </section>

            </div>
          </div>
        </accordion-group>
        <accordion-group x-is-open="subdomainAllocation.isopen" data-ng-init="subdomainAllocation.isopen = false"
                         data-ng-if="quotaVm.hasSubdomain(quotaVm.domainQuotaDto)">
          <accordion-heading>
            <span>{{'MANAGE_QUOTA.BOX_FORM.SUBDOMAINS_DEFAULT_SETTINGS.MAIN_SECTION_TITLE' | translate}}</span>
            <i class="fa fa-exclamation-circle quota-status has-error-quota"
               data-ng-show="quotaForm.subdomainsQuota.$error.unitMax ||
                      quotaForm.subdomainsUserQuotaPerUser.$error.unitMax ||
                      quotaForm.subdomainsUserMaxFileSize.$error.unitMax ||
                      quotaForm.subdomainsWorkgroupQuota.$error.unitMax ||
                      quotaForm.subdomainsWorkgroupMaxFileSize.$error.unitMax ||
                      quotaVm.graph.subdomain.alert">
            </i>
            <i class="fa pull-right" data-ng-class="{'fa-angle-down': subdomainAllocation.isopen, 'fa-angle-left': !subdomainAllocation.isopen}">
            </i>
          </accordion-heading>

          <!-- Graph 5 -->
          <section id="subcontainers-allocation-quota-graph"
                   data-ls-graph="quotaVm.graph.subdomain" data-ng-if="quotaVm.isGraphReady">
          </section>

            <div class="error-panel" role="alert" data-ng-show="quotaVm.graph.subdomain.alert">
              <span class="fa fa-exclamation-circle"></span>
              <span class="sr-only">{{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR' | translate}} :</span>
              {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_QUOTA' | translate}}
              {{'MANAGE_QUOTA.BOX_FORM.SPACES_LABEL.SUB_DOMAINS' | translate}}.
            </div>
          <div class="col-xs-12 no-padding clearfix">
            <div class="accordion-header-form clearfix-after col-xs-12 no-padding border-grey">
              <h3 class="pull-left uppercase">
                {{'MANAGE_QUOTA.BOX_FORM.SUBDOMAINS_DEFAULT_SETTINGS.SUB_SECTION_SUBDOMAINS_QUOTA' | translate}}
              </h3>
            </div>
            <div class="clear">&nbsp</div>
            <div class="accordion-form-content form-inline clear">
              <section class="col-xs-6-5 no-padding">
                <div class="form-group col-xs-12 no-padding quota-status">
                  <label
                    class="pull-left"
                    for="subdomainsQuota"
                  >
                    <i 
                      class="fa fa-info-circle fa-lg"
                      tooltip-placement="bottom"
                      tooltip-popup-delay='1250'
                      tooltip-append-to-body="true"
                      tooltip="{{'MANAGE_QUOTA.BOX_FORM.DOMAIN_SHARED_QUOTA.DESCRIPTION' | translate}}"
                    >
                    </i>
                    {{'MANAGE_QUOTA.BOX_FORM.DOMAIN_SHARED_QUOTA.LABEL' | translate}} :
                  </label>
                  <span class="pull-right">
                    <label
                      class="switch"
                      data-ng-class="{'btn-disabled': !quotaVm.domainQuotaDto.defaultDomainSharedOverride
                      && !quotaVm.isRootDomain(quotaVm.domainQuotaDto)}"
                    >
                      <input
                        type="checkbox"
                        data-ng-model="quotaVm.domainQuotaDto.defaultDomainShared"
                        data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.domainQuotaDto.defaultDomainSharedOverride)"
                        data-ng-change="quotaVm.formRender(quotaForm)"
                      >
                      <div class="slider round"></div>
                    </label>
                    <a 
                      class="link-ctn pull-right"
                      data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                      data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.domainQuotaDto, quotaVm.parentDomainQuotaDto, 'defaultDomainShared')"
                    >
                      <i
                        class="fa link-icon show-link"
                        data-ng-class="{'fa-link' : !quotaVm.domainQuotaDto.defaultDomainSharedOverride,
                          'fa-chain-broken' : quotaVm.domainQuotaDto.defaultDomainSharedOverride}"
                      >
                      </i>
                    </a>
                  </span>
                </div>
              </section>
            </div>
            <div class="accordion-form-content form-inline clear">
              <section class="col-xs-6-5 no-padding">
                <div class="form-group col-xs-12 no-padding"
                     data-ng-class="{'has-error-quota': quotaForm.subdomainsQuota.$error.unitMax}">
                  <label for="subdomainsQuota" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.SUBDOMAINS_DEFAULT_SETTINGS.LABEL_SUBDOMAINS_QUOTA' | translate}} :
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="subdomainsQuota" name="subdomainsQuota"
                           data-ng-model="quotaVm.domainQuotaDto.getDefaultQuota"
                           data-ng-change="quotaVm.domainQuotaDto.setDefaultQuota(
                                          quotaForm.subdomainsQuota.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.domainQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.domainQuotaDto.defaultQuotaOverride)"
                           x-unit="quotaVm.unit.domains.defaultQuota"
                           x-unit-max="quotaVm.parentDomainQuotaDto.defaultQuota || quotaVm.domainQuotaDto.quota">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.domains.defaultQuota"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.domains.defaultQuota = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a class="link-ctn"
                       tooltip-placement="bottom"
                       tooltip-popup-delay='1250'
                       tooltip-append-to-body="true"
                       tooltip="{{quotaVm.domainQuotaDto.defaultQuotaOverride ?
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                              translate:'{value:quotaVm.parentDomainQuotaDto.getDefaultQuota(true)}'}}"
                       data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.domainQuotaDto, quotaVm.parentDomainQuotaDto, 'defaultQuota')"
                       data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)">
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.domainQuotaDto.defaultQuotaOverride,
                                'fa-chain-broken' : quotaVm.domainQuotaDto.defaultQuotaOverride}">
                      </i>
                    </a>
                  </span>
                  <div class="pull-right help-block" data-ng-show="quotaForm.subdomainsQuota.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    {{(quotaVm.parentDomainQuotaDto.defaultQuota || quotaVm.domainQuotaDto.quota)
                    | readableSize:quotaVm.unit.parentdomains.defaultQuota:true}}
                  </div>
                </div>
              </section>
            </div>
            <div class="accordion-header-form clearfix-after col-xs-12 no-padding border-grey">
              <h3 class="pull-left uppercase">
                {{'MANAGE_QUOTA.BOX_FORM.SUBDOMAINS_DEFAULT_SETTINGS.SUB_SECTION_PERSONAL_SPACES_QUOTA' | translate}}
              </h3>
            </div>
            <div class="clear">&nbsp</div>
            <div class="accordion-form-content form-inline clear">
              <section class="col-xs-6-5 no-padding">
                <div class="form-group col-xs-12 no-padding quota-status"
                     data-ng-class="{'has-error-quota': quotaForm.subdomainsUserQuota.$error.unitMax}">
                  <label for="subdomainsUserQuota" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.SUBDOMAINS_DEFAULT_SETTINGS.LABEL_PERSONAL_SPACES_QUOTA' | translate}} :
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="subdomainsUserQuota" name="subdomainsUserQuota"
                           data-ng-model="quotaVm.userQuotaDto.getDefaultQuota"
                           data-ng-change="quotaVm.userQuotaDto.setDefaultQuota(
                                          quotaForm.subdomainsUserQuota.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.userQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.userQuotaDto.defaultQuotaOverride,
                            quotaVm.domainQuotaDto.defaultDomainShared)"
                           x-unit="quotaVm.unit.user.defaultQuota"
                           data-ng-attr-data-unit-max="quotaVm.domainQuotaDto.defaultDomainShared ?
                            undefined : quotaVm.domainQuotaDto.defaultQuota">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.user.defaultQuota"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.user.defaultQuota = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a
                      class="link-ctn"
                      data-ng-class="{'btn-disabled': quotaVm.domainQuotaDto.defaultDomainShared}"
                      tooltip-placement="bottom"
                      tooltip-popup-delay='1250'
                      tooltip-append-to-body="true"
                      tooltip="{{quotaVm.userQuotaDto.defaultQuotaOverride ?
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                        translate:'{value:quotaVm.parentContainersQuotaDto.user.getDefaultQuota(true)}'}}"
                      data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.userQuotaDto,
                        quotaVm.parentContainersQuotaDto.user, 'defaultQuota')"
                      data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                    >
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.userQuotaDto.defaultQuotaOverride,
                                'fa-chain-broken' : quotaVm.userQuotaDto.defaultQuotaOverride}">
                      </i>
                    </a>
                    </span>
                  <div class="pull-right help-block" data-ng-show="quotaForm.subdomainsUserQuota.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    {{quotaVm.domainQuotaDto.defaultQuota | readableSize:quotaVm.unit.domains.defaultQuota:true}}
                  </div>
                </div>
                <div class="form-group col-xs-12 no-padding quota-status"
                     data-ng-class="{'has-error-quota': quotaForm.subdomainsUserQuotaPerUser.$error.unitMax}">
                  <label for="subdomainsUserQuotaPerUser" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.SUBDOMAINS_DEFAULT_SETTINGS.LABEL_USER_PERSONAL_SPACES_QUOTA' |
                    translate}} :
                    <span>{{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_MAX_QUOTA' | translate}}</span>
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="subdomainsUserQuotaPerUser"
                           name="subdomainsUserQuotaPerUser"
                           data-ng-model="quotaVm.userQuotaDto.getDefaultAccountQuota"
                           data-ng-change="quotaVm.userQuotaDto.setDefaultAccountQuota(
                                          quotaForm.subdomainsUserQuotaPerUser.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.userQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.userQuotaDto.defaultAccountQuotaOverride,
                            quotaVm.domainQuotaDto.defaultDomainShared)"
                           x-unit="quotaVm.unit.user.defaultAccountQuota"
                           data-ng-attr-data-unit-max="quotaVm.domainQuotaDto.defaultDomainShared ?
                            undefined : quotaVm.userQuotaDto.defaultQuota">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.user.defaultAccountQuota"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.user.defaultAccountQuota = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a
                      class="link-ctn"
                      data-ng-class="{'btn-disabled': quotaVm.domainQuotaDto.defaultDomainShared}"
                      tooltip-placement="bottom"
                      tooltip-popup-delay='1250'
                      tooltip-append-to-body="true"
                      tooltip="{{quotaVm.userQuotaDto.defaultAccountQuotaOverride ?
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                        translate:'{value:quotaVm.parentContainersQuotaDto.user.getDefaultAccountQuota(true)}'}}"
                      data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.userQuotaDto,
                        quotaVm.parentContainersQuotaDto.user, 'defaultAccountQuota')"
                      data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                    >
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.userQuotaDto.defaultAccountQuotaOverride,
                                'fa-chain-broken' : quotaVm.userQuotaDto.defaultAccountQuotaOverride}">
                      </i>
                    </a>
                  </span>
                  <div class="pull-right help-block" data-ng-show="quotaForm.subdomainsUserQuotaPerUser.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    {{quotaVm.userQuotaDto.defaultQuota | readableSize:quotaVm.unit.user.defaultQuota:true}}
                  </div>
                </div>
                <div class="form-group col-xs-12 no-padding quota-status"
                     data-ng-class="{'has-error-quota': quotaForm.subdomainsUserMaxFileSize.$error.unitMax}">
                  <label for="subdomainsUserMaxFileSize" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.SUBDOMAINS_DEFAULT_SETTINGS.LABEL_PERSONAL_SPACE_MAX_FILE_SIZE' |
                    translate}} :
                    <span>{{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_MAX_QUOTA' | translate}}</span>
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="subdomainsUserMaxFileSize"
                           name="subdomainsUserMaxFileSize"
                           data-ng-model="quotaVm.userQuotaDto.getDefaultMaxFileSize"
                           data-ng-change="quotaVm.userQuotaDto.setDefaultMaxFileSize(
                                          quotaForm.subdomainsUserMaxFileSize.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.userQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.userQuotaDto.defaultMaxFileSizeOverride)"
                           x-unit="quotaVm.unit.user.defaultMaxFileSize"
                           data-ng-attr-data-unit-max="quotaVm.domainQuotaDto.defaultDomainShared ?
                            quotaVm.domainQuotaDto.defaultQuota : quotaVm.userQuotaDto.defaultAccountQuota">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.user.defaultMaxFileSize"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.user.defaultMaxFileSize = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a class="link-ctn"
                       tooltip-placement="bottom"
                       tooltip-popup-delay='1250'
                       tooltip-append-to-body="true"
                       tooltip="{{quotaVm.userQuotaDto.defaultMaxFileSizeOverride ?
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                              translate:'{value:quotaVm.parentContainersQuotaDto.user.getDefaultMaxFileSize(true)}'}}"
                       data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.userQuotaDto,
                              quotaVm.parentContainersQuotaDto.user, 'defaultMaxFileSize')"
                       data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)">
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.userQuotaDto.defaultMaxFileSizeOverride,
                                'fa-chain-broken' : quotaVm.userQuotaDto.defaultMaxFileSizeOverride}">
                      </i>
                    </a>
                  </span>
                  <div class="pull-right help-block" data-ng-show="quotaForm.subdomainsUserMaxFileSize.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    <span data-ng-if="!quotaVm.domainQuotaDto.defaultDomainShared">
                      {{quotaVm.userQuotaDto.defaultAccountQuota | readableSize:quotaVm.unit.user.defaultAccountQuota:true}}
                    </span>
                    <span data-ng-if="quotaVm.domainQuotaDto.defaultDomainShared">
                      {{quotaVm.domainQuotaDto.defaultQuota | readableSize:quotaVm.unit.domains.defaultQuota:true}}
                    </span>
                  </div>
                </div>
              </section>
            </div>
            <div class="accordion-header-form clearfix-after col-xs-12 no-padding border-grey">
              <h3 class="pull-left uppercase">
                {{'MANAGE_QUOTA.BOX_FORM.SUBDOMAINS_DEFAULT_SETTINGS.SUB_SECTION_WORKGROUP_QUOTA' | translate}}
              </h3>
            </div>
            <div class="clear">&nbsp</div>
            <div class="accordion-form-content form-inline clear">
              <section class="col-xs-6-5 no-padding">
                <div class="form-group col-xs-12 no-padding quota-status"
                     data-ng-class="{'has-error-quota': quotaForm.subdomainsWorkgroupQuota.$error.unitMax}">
                  <label for="subdomainsWorkgroupQuota" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.SUBDOMAINS_DEFAULT_SETTINGS.LABEL_WORKGROUP_QUOTA' | translate}} :
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="subdomainsWorkgroupQuota"
                           name="subdomainsWorkgroupQuota"
                           data-ng-model="quotaVm.workgroupQuotaDto.getDefaultQuota"
                           data-ng-change="quotaVm.workgroupQuotaDto.setDefaultQuota(
                                          quotaForm.subdomainsWorkgroupQuota.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.workgroupQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(!quotaVm.workgroupQuotaDto.defaultQuotaOverride,
                            quotaVm.domainQuotaDto.defaultDomainShared)"
                           x-unit="quotaVm.unit.workgroup.defaultQuota"
                           data-ng-attr-data-unit-max="quotaVm.domainQuotaDto.defaultDomainShared ?
                            undefined : quotaVm.domainQuotaDto.defaultQuota">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.workgroup.defaultQuota"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.workgroup.defaultQuota = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a
                      class="link-ctn"
                      data-ng-class="{'btn-disabled': quotaVm.domainQuotaDto.defaultDomainShared}"
                      tooltip-placement="bottom"
                      tooltip-popup-delay='1250'
                      tooltip-append-to-body="true"
                      tooltip="{{quotaVm.workgroupQuotaDto.defaultQuotaOverride ?
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                        'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                        translate:'{value:quotaVm.parentContainersQuotaDto.workgroup.getDefaultQuota(true)}'}}"
                      data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.workgroupQuotaDto,
                        quotaVm.parentContainersQuotaDto.workgroup, 'defaultQuota')"
                      data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                    >
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.workgroupQuotaDto.defaultQuotaOverride,
                                'fa-chain-broken' : quotaVm.workgroupQuotaDto.defaultQuotaOverride}">
                      </i>
                    </a>
                  </span>
                  <div class="pull-right help-block" data-ng-show="quotaForm.subdomainsWorkgroupQuota.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    {{quotaVm.domainQuotaDto.defaultQuota | readableSize:quotaVm.unit.domains.defaultQuota:true}}
                  </div>
                </div>
                <div class="form-group col-xs-12 no-padding quota-status"
                     data-ng-class="{'has-error-quota': quotaForm.subdomainsWorkgroupMaxFileSize.$error.unitMax}">
                  <label for="subdomainsWorkgroupMaxFileSize" class="pull-left">
                    {{'MANAGE_QUOTA.BOX_FORM.SUBDOMAINS_DEFAULT_SETTINGS.LABEL_WORKGROUP_MAX_FILE_SIZE' | translate}} :
                  </label>
                  <span class="pull-right">
                    <input type="text" class="form-control" id="subdomainsWorkgroupMaxFileSize"
                           name="subdomainsWorkgroupMaxFileSize"
                           data-ng-model="quotaVm.workgroupQuotaDto.getDefaultMaxFileSize"
                           data-ng-change="quotaVm.workgroupQuotaDto.setDefaultMaxFileSize(
                                          quotaForm.subdomainsWorkgroupMaxFileSize.$viewValue, quotaForm)"
                           data-ng-blur="quotaVm.workgroupQuotaDto.updateGraph(quotaForm)"
                           data-ng-disabled="quotaVm.isInputDisabled(
                                            !quotaVm.workgroupQuotaDto.defaultMaxFileSizeOverride)"
                           x-unit="quotaVm.unit.workgroup.defaultMaxFileSize"
                           data-ng-attr-data-unit-max="quotaVm.domainQuotaDto.defaultDomainShared ?
                            quotaVm.domainQuotaDto.defaultQuota : quotaVm.workgroupQuotaDto.defaultQuota">
                    <span class="input-unit" x-ls-dropdown x-value="quotaVm.unit.workgroup.defaultMaxFileSize"
                          x-list="quotaVm.unit.value"
                          x-action="quotaVm.unit.workgroup.defaultMaxFileSize = unit; quotaVm.formRender(quotaForm)">
                    </span>
                    <a class="link-ctn"
                       tooltip-placement="bottom"
                       tooltip-popup-delay='1250'
                       tooltip-append-to-body="true"
                       tooltip="{{quotaVm.workgroupQuotaDto.defaultMaxFileSizeOverride ?
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_RESET_TOOLTIP' :
                              'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.HINT_UNLINK_TOOLTIP' |
                              translate:'{value:quotaVm.parentContainersQuotaDto.workgroup.getDefaultMaxFileSize(true)}'}}"
                       data-ng-click="quotaVm.manageOverride(quotaForm, quotaVm.workgroupQuotaDto,
                              quotaVm.parentContainersQuotaDto.workgroup, 'defaultMaxFileSize')"
                       data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)">
                      <i class="fa link-icon show-link"
                         data-ng-class="{'fa-link' : !quotaVm.workgroupQuotaDto.defaultMaxFileSizeOverride,
                                'fa-chain-broken' : quotaVm.workgroupQuotaDto.defaultMaxFileSizeOverride}">
                      </i>
                    </a>
                  </span>
                  <div class="pull-right help-block"
                       data-ng-show="quotaForm.subdomainsWorkgroupMaxFileSize.$error.unitMax">
                    {{'MANAGE_QUOTA.BOX_FORM.HINT_LABELS.ERROR_MAX_VALUE' | translate}}
                    <span data-ng-if="!quotaVm.domainQuotaDto.defaultDomainShared">
                      {{quotaVm.workgroupQuotaDto.defaultQuota | readableSize:quotaVm.unit.workgroup.defaultQuota:true}}
                    </span>
                    <span data-ng-if="quotaVm.domainQuotaDto.defaultDomainShared">
                      {{quotaVm.domainQuotaDto.defaultQuota | readableSize:quotaVm.unit.domains.defaultQuota:true}}
                    </span>
                  </div>
                </div>
              </section>
            </div>
          </div>
        </accordion-group>
      </accordion>
      <div class="box-footer">
        <!-- Validation -->
        <div class="form-group">
          <div class="controls">
            <button id="delete" name="reset" type="button" class="btn btn-danger"
                    data-ng-hide="quotaVm.isRootDomain(quotaVm.domainQuotaDto)"
                    data-ng-click="quotaVm.setParentDefault(quotaForm)">
              {{'MANAGE_QUOTA.BOX_FORM.FORM_ACTIONS.BUTTON_RESET' | translate}}
            </button>
            <button type="button" id="cancel" name="reset" class="btn btn-warning"
                    data-ng-click="quotaVm.reset(quotaForm)">
              {{'MANAGE_QUOTA.BOX_FORM.FORM_ACTIONS.BUTTON_CANCEL' | translate}}
            </button>
            <button type="submit" id="submit" name="submit" class="btn btn-success">
              {{'MANAGE_QUOTA.BOX_FORM.FORM_ACTIONS.BUTTON_SUBMIT' | translate}}
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
